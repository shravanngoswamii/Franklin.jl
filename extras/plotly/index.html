<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
   <!-- Syntax highlighting via Prism, note: restricted langs -->
<link rel="stylesheet" href="/libs/highlight/github.min.css">
 
  <link rel="stylesheet" href="/css/jtd.css">
  <link rel="icon" href="/assets/infra/logoF_square.gif">
   <title>Work with Plotly</title> 

  <!-- LUNR -->
  <script src="/libs/lunr/lunr.min.js"></script>
  <script src="/libs/lunr/lunr_index.js"></script>
  <script src="/libs/lunr/lunrclient.min.js"></script>

  <!-- PLOTLY -->
  
  <script src="/libs/plotly/plotly.min.js"></script>
  <script>
    const PlotlyJS_json = async (div, url) => {
      response = await fetch(url); // get file
      fig = await response.json(); // convert it to json
      // Make the plot fit the screen responsively. See the documentation of plotly.js. https://plotly.com/javascript/responsive-fluid-layout/
      if (typeof fig.config === 'undefined') { fig["config"] = {} }
      delete fig.layout.width
      delete fig.layout.height
      fig["layout"]["autosize"] = true
      fig["config"]["autosizable"] = true
      fig["config"]["responsive"] = true

      // make it easier to scroll throught the website rather than being blocked by a figure.
      fig.config["scrollZoom"] = false

      // PlotlyJS.savefig by default add the some more attribute to make a static plot.
      // Disable them to make the website fancier.
      delete fig.config.staticPlot
      delete fig.config.displayModeBar
      delete fig.config.doubleClick
      delete fig.config.showTips

      Plotly.newPlot(div, fig);
    };
  </script>
  

</head>

<body> <!-- closed in foot.html -->
  <div class="page-wrap"> <!-- closed in foot.html -->
    <!-- SIDE BAR -->
    <div class="side-bar">
      <div class="header">
        <a href="/" class="title">
          <img style="height:60px;" src="/assets/infra/franklin.svg" alt="franklin" />
          <style>
            @media (max-width: 31.25rem) {
              .side-bar .show-menu {
                height: 30px;
              }
            }

            @media (max-width: 50rem) {
              .side-bar .header .title {
                padding-top: 0;
                padding-bottom: 0;
              }

              .header .title img {
                height: 60px;
                max-width: 100px !important;
              }
            }

            @media (min-width: 66.5rem) {
              .header .title img {
                max-width: 140px !important;
              }
            }
          </style>
        </a>
      </div>
      <label for="show-menu" class="show-menu">MENU</label>
      <input type="checkbox" id="show-menu" role="button">
      <div class="menu" id="side-menu">
        <ul class="menu-list">
          <!-- HOME -->
          <li class="menu-list-item "><a href="/" class="menu-list-link">• Home</a>
            <!-- WORKFLOW -->
          <li class="menu-list-parent "><a href="/workflow/" class="menu-list-link">•
              Workflow</a>
            <ul class="menu-list-child-list ">
              <li class="menu-list-item "><a href="/workflow/"
                  class="menu-list-link">Create and edit</a>
              <li class="menu-list-item "><a href="/workflow/structure/"
                  class="menu-list-link">Page structure</a>
              <li class="menu-list-item "><a href="/workflow/deploy/"
                  class="menu-list-link">Deploy</a>
              <li class="menu-list-item "><a href="/workflow/sitemap-rss/"
                  class="menu-list-link">Sitemap and RSS</a>
            </ul>
            <!-- SYNTAX -->
            <!-- NOTE: if adding a menu item, add ref to first item! -->
          <li class="menu-list-parent "><a href="/syntax/markdown/"
              class="menu-list-link">• Syntax</a>
            <ul class="menu-list-child-list ">
              <li class="menu-list-item "><a href="/syntax/markdown/"
                  class="menu-list-link">Markdown</a>
              <li class="menu-list-item "><a href="/syntax/divs-commands/"
                  class="menu-list-link">Divs and Commands</a>
              <li class="menu-list-item "><a href="/syntax/page-variables/"
                  class="menu-list-link">Page Variables</a>
              <li class="menu-list-item "><a href="/syntax/rss/"
                  class="menu-list-link">RSS</a>
              <li class="menu-list-item "><a href="/syntax/utils/"
                  class="menu-list-link">Utils</a>
            </ul>
            <!-- STYLING -->
          <li class="menu-list-parent "><a href="/styling/templates/"
              class="menu-list-link">• Styling</a>
            <ul class="menu-list-child-list ">
              <li class="menu-list-item "><a href="/styling/templates/"
                  class="menu-list-link">Templates</a>
              <li class="menu-list-item "><a href="/styling/classes/"
                  class="menu-list-link">Classes</a>
            </ul>
            <!-- CODE -->
          <li class="menu-list-parent "><a href="/code/" class="menu-list-link">• Code</a>
            <ul class="menu-list-child-list ">
              <li class="menu-list-item "><a href="/code/"
                  class="menu-list-link">Inserting code</a>
              <li class="menu-list-item "><a href="/code/eval-tricks/"
                  class="menu-list-link">Code tricks</a>
              <li class="menu-list-item "><a href="/code/literate/"
                  class="menu-list-link">Literate.jl</a>
            </ul>
            <!-- EXTRAs -->
          <li class="menu-list-parent active"><a href="/extras/" class="menu-list-link">•
              Extras</a>
            <ul class="menu-list-child-list ">
              <li class="menu-list-item "><a href="/extras/"
                  class="menu-list-link">Overview</a>
              <li class="menu-list-item "><a href="/extras/lunr/"
                  class="menu-list-link">Search with Lunr</a>
              <li class="menu-list-item "><a href="/extras/utterances/"
                  class="menu-list-link">Comments with Utterances</a>
              <li class="menu-list-item "><a href="/extras/literate/"
                  class="menu-list-link">Literate</a>
              <li class="menu-list-item active"><a href="/extras/plotly/"
                  class="menu-list-link">Plotly</a>
            </ul>
            <!-- FAQ -->
          <li class="menu-list-parent "><a href="/faq/technical/" class="menu-list-link">•
              FAQ</a>
            <ul class="menu-list-child-list ">
              <li class="menu-list-item "><a href="/faq/technical/"
                  class="menu-list-link">Technical</a>
              <li class="menu-list-item "><a href="/faq/troubleshooting/"
                  class="menu-list-link">Troubleshooting</a>
              <li class="menu-list-item "><a href="/faq/why-o-why/"
                  class="menu-list-link">Meta</a>
            </ul>
        </ul>

        <!-- Search Bar -->
        <form id="lunrSearchForm" name="lunrSearchForm" class="search-container">
          <input class="search-input" name="q" placeholder="Enter search term" type="text">
          <input class="search-button" type="submit" value=" " formaction="/search/index.html">
        </form>

      </div>
      <div class="footer">
        <a href="/faq/why-o-why/"><img style="width:40%;padding-left:10px;margin-bottom:15px;"
            src="/assets/infra/logoF2.svg" alt="Franklin Logo" /></a>
      </div>
    </div>
    <!-- CONTENT -->
    <div class="main-content-wrap"> <!-- closed in foot.html -->
      <div class="main-content" id="focus" tabindex="-1" style="outline:0;"> <!-- closed in foot.html -->
        <div class="main-header">
          <a name="pagetop"></a>

          <a id="github" href="https://github.com/tlienart/Franklin.jl/blob/master/docs/extras/plotly.md">Page source</a>
          <span style="width:30px; text-align: center;color:lightgray;">|</span>
          <a id="github" href="https://github.com/tlienart/Franklin.jl">GitHub Repository</a>
        </div>

        <!-- Content appended here (in class franklin-content) --><div class="franklin-content"><h1 id="work_with_plotly"><a href="#work_with_plotly" class="header-anchor">Work with Plotly</a></h1>
<p>If you want interactive plots on some pages and are not afraid of using heavy javascript libraries, then <a href="https://plot.ly/javascript/">Plotly</a> is a nice library. The Julia wrapper <a href="https://github.com/sglyon/PlotlyJS.jl">PlotlyJS.jl</a> can be used to generate Plotly plots.</p>
<h2 id="pre-requisites"><a href="#pre-requisites" class="header-anchor">Pre-requisites</a></h2>
<p>Download <a href="https://cdn.plot.ly/plotly-latest.min.js"><code>plotly.min.js</code></a> saving it to <code>/_libs/plotly/plotly.min.js</code>.</p>
<p>Then create a variable <code>hasplotly</code> with default value <code>false</code>: in your <code>config.md</code> write</p>
<pre><code class="language-julia">@def hasplotly &#61; false</code></pre>
<p>Finally, in your <code>src/_layout/head.html</code> add</p>
<pre><code class="language-html">&#123;&#123;if hasplotly&#125;&#125;
  &lt;script src&#61;&quot;/libs/plotly/plotly.min.js&quot;&gt;&lt;/script&gt; 
  &lt;script&gt;
    // This function is used when calling &#96;\fig&#123;...&#125;&#96; See # Using \fig&#123;...&#125; below
    const PlotlyJS_json &#61; async &#40;div, url&#41; &#61;&gt; &#123;
      response &#61; await fetch&#40;url&#41;; // get file
      fig &#61; await response.json&#40;&#41;; // convert it to json
      // Make the plot fit the screen responsively. See the documentation of plotly.js. https://plotly.com/javascript/responsive-fluid-layout/
      if &#40;typeof fig.config &#61;&#61;&#61; &#39;undefined&#39;&#41; &#123; fig&#91;&quot;config&quot;&#93;&#61;&#123;&#125; &#125;
      delete fig.layout.width
      delete fig.layout.height
      fig&#91;&quot;layout&quot;&#93;&#91;&quot;autosize&quot;&#93; &#61; true
      fig&#91;&quot;config&quot;&#93;&#91;&quot;autosizable&quot;&#93; &#61; true
      fig&#91;&quot;config&quot;&#93;&#91;&quot;responsive&quot;&#93; &#61; true

      // make it easier to scroll throught the website rather than being blocked by a figure.
      fig.config&#91;&quot;scrollZoom&quot;&#93; &#61; false

      // PlotlyJS.savefig by default add the some more attribute to make a static plot.
      // Disable them to make the website fancier.
      delete fig.config.staticPlot
      delete fig.config.displayModeBar
      delete fig.config.doubleClick
      delete fig.config.showTips

      Plotly.newPlot&#40;div, fig&#41;;
    &#125;;
  &lt;/script&gt;
  &#123;&#123;end&#125;&#125;</code></pre>
<h2 id="offline-generated_plot"><a href="#offline-generated_plot" class="header-anchor">Offline-generated plot</a></h2>
<p>Assuming you already have the Plotly code for some plot, displaying the result on a page with Franklin is now pretty straightforward. Start by adding</p>
<pre><code class="language-julia">@def hasplotly &#61; true</code></pre>
<p>so that the JS library  will be  loaded then somewhere appropriate add:</p>
<pre><code class="language-html">~~~
&lt;div id&#61;&quot;tester&quot; style&#61;&quot;width:600px;height:350px;&quot;&gt;&lt;/div&gt;

&lt;script&gt;
	TESTER &#61; document.getElementById&#40;&#39;tester&#39;&#41;;
	Plotly.newPlot&#40; TESTER, &#91;&#123;
	x: &#91;1, 2, 3, 4, 5&#93;,
	y: &#91;1, 2, 4, 8, 16&#93; &#125;&#93;, &#123;
	margin: &#123; t: 0 &#125; &#125; &#41;;
&lt;/script&gt;
~~~</code></pre>
<p>This will give:</p>

<div id="tester" style="width:600px;height:350px;"></div>

<script>
	TESTER = document.getElementById('tester');
	Plotly.newPlot( TESTER, [{
	x: [1, 2, 3, 4, 5],
	y: [1, 2, 4, 8, 16] }], {
	margin: { t: 0 } } );
</script>

<h2 id="live-generated_plot"><a href="#live-generated_plot" class="header-anchor">Live-generated plot</a></h2>
<p>One step further is to use <code>PlotlyJS</code> to define a  plot and then pass the result to Franklin. Start by adding <code>PlotlyJS</code>  to your environment:</p>
<pre><code class="language-julia-repl">&#40;myWebsite&#41; pkg&gt; add PlotlyJS</code></pre>
<p>Then, beyond the <code>@def hasplotly &#61; true</code>, add the following code:</p>
<pre><code class="language-plaintext">&#96;&#96;&#96;julia:ex1
using PlotlyJS
z &#61;  &#91;10     10.625  12.5  15.625  20
     5.625  6.25    8.125 11.25   15.625
     2.5    3.125   5.    8.125   12.5
     0.625  1.25    3.125 6.25    10.625
     0      0.625   2.5   5.625   10&#93;

data   &#61; contour&#40;; z&#61;z&#41;
layout &#61; Layout&#40;; title&#61;&quot;Basic Contour Plot&quot;&#41;
plt    &#61; plot&#40;data, layout&#41;

fdplotly&#40;json&#40;plt&#41;&#41; # hide
&#96;&#96;&#96;
\textoutput&#123;ex1&#125;</code></pre>
<p><strong>Note</strong>: the <code>fdplotly</code> is a convenience function exported by <code>Franklin</code>; it just prints the required HTML such that a plotly object gets placed. It takes the JSON string of the plot &#40;which you can get with <code>json&#40;plt&#41;</code>&#41; and takes two optional keyword arguments:</p>
<ul>
<li><p><code>id</code>: to specify the name of the div the plotly object is associated to, it&#39;s randomly generated by default, and,</p>
</li>
<li><p><code>style</code> which takes a string indicating the desired CSS for the div e.g. the default is <code>&quot;width:600px;height:350px&quot;</code>.</p>
</li>
</ul>
<p>The code block above gives:</p>
<pre><code class="language-julia">using PlotlyJS
z &#61;  &#91;10     10.625  12.5  15.625  20
     5.625  6.25    8.125 11.25   15.625
     2.5    3.125   5.    8.125   12.5
     0.625  1.25    3.125 6.25    10.625
     0      0.625   2.5   5.625   10&#93;

data   &#61; contour&#40;; z&#61;z&#41;
layout &#61; Layout&#40;; title&#61;&quot;Basic Contour Plot&quot;&#41;
plt    &#61; plot&#40;data, layout&#41;</code></pre>

<div id="fdpdhq" style="width:600px;height:350px"></div>

<script>
	var fig = {"layout":{"margin":{"l":50,"b":50,"r":50,"t":60},"title":"Basic Contour Plot"},"data":[{"type":"contour","z":[[10.0,5.625,2.5,0.625,0.0],[10.625,6.25,3.125,1.25,0.625],[12.5,8.125,5.0,3.125,2.5],[15.625,11.25,8.125,6.25,5.625],[20.0,15.625,12.5,10.625,10.0]]}]};
	CONTAINER = document.getElementById('fdpdhq');
	Plotly.newPlot(CONTAINER, fig.data, fig.layout)
</script>

<h3 id="using_fig_recommended"><a href="#using_fig_recommended" class="header-anchor">Using <code>\fig&#123;...&#125;</code> &#40;recommended&#41;</a></h3>
<p>Now you might use <code>\fig&#123;...&#125;</code> to insert graph <a href="/syntax/markdown/#inserting_a_figure">just like normal</a>. This also works fine with <code>Plots.jl</code> and <code>PlotlyBase.jl</code>.</p>
<p><strong>Note</strong>: <code>\fig&#123;...&#125;</code> will call the JavaScript function <code>PlotlyJS_json</code> defined <a href="#pre-requisites">above</a>. You might customize the behavior by modifying the JavaScript. Also, make sure <code>@def hasplotly &#61; true</code> is properly set.</p>
<pre><code class="language-plaintext">&#96;&#96;&#96;julia:ex2
using PlotlyJS
p&#61;plot&#40;
     scatter&#40;x&#61;1:10, y&#61;rand&#40;10&#41;, mode&#61;&quot;markers&quot;&#41;,
     Layout&#40;title&#61;&quot;Responsive Plots&quot;&#41;
     &#41;
savejson&#40;p, joinpath&#40;@OUTPUT, &quot;plotlyex.json&quot;&#41;&#41;  # savejson is an alternative to savefig # hide
# PlotlyBase.json &#40;also exported by PlotlyJS&#41; often gives a smaller json compared to PlotlyJS.savefig # hide
&#96;&#96;&#96;

\fig&#123;plotlyex&#125;</code></pre>
<p>This code block gives:</p>
<pre><code class="language-julia">using PlotlyJS
p&#61;plot&#40;
     scatter&#40;x&#61;1:10, y&#61;rand&#40;10&#41;, mode&#61;&quot;markers&quot;&#41;,
     Layout&#40;title&#61;&quot;Responsive Plots&quot;&#41;
     &#41;</code></pre>
<div id="fdpxxh" style=""></div>
<script>
graphDiv = document.getElementById("fdpxxh");
plotlyPromise = PlotlyJS_json(graphDiv, '/assets/extras/plotly/code/output/plotlyex.json');
</script>

<p><strong>Note</strong>: The plot will be automatically resized when the browser window size changes due to the JavaScript function provided above. This, however, will ignore the <code>layout.height</code> and the <code>layout.width</code> supplied in the json. It gives good output in most cases. But if you need fine control over the size of the figure, please modify the JavaScript.</p>
<div class="page-foot">
  <div class="copyright">
    &copy; Thibaut Lienart. Last modified: April 15, 2024. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div><!-- CONTENT ENDS HERE -->
    </div> <!-- end of class main-content -->
    </div> <!-- end of class main-content-wrap -->
    </div> <!-- end of class page-wrap-->
    
    
      <script src="/libs/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script>

    
  </body>
</html>
